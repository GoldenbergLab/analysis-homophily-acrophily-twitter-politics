# Retweet Network Study 

## Setup

To be able to run any of the three simulations, simply run the following commands from the retweet_network_study directory in your command terminal:
```
pipenv install
```

To then activate the environment, run:
```
pipenv shell
```

## Running simulations

With the environment activated, the main command from the command line to run any of the simulations is as follows:
```
python -m acrophily_sims
```

You may then pass in the following additional arguments:
```
'-s' (or '--sim_type'): The type of simulation ('acrophily', 'mean_abs_diff', 'prob_diff')
'-p' (or '--poli_affil'): The political affiliation on which you run the simulation ('left' or 'right')
'-f' (or '--frac_data'): Indicates whether to run simulation on fraction of data (True or False)
'fs' (or '--frac_start'): Indicates the starting fraction of data (float within range: [0.0, 1.0))
'fe' (or '--frac_end'): Indicates the end fraction of data (float within range: (0.0, 1.0])
```

As an example, if you wish to run the mean absolute difference simulation on the first ten percent of right-leaning participants, you pass the following argument from the command line in the retweet_network_study directory after installing and creating your pipenv environment:
```
python -m acrophily_sims -s 'mean_abs_diff' -p 'right' -f True -fs 0.0 -fe 0.1
```

## Directories

### Data

Two datasets -- test_users.csv and test_rt.csv -- are required to run the unit tests on the simulations (included in the repo), and users_ratings.csv and rt_network.csv are required to run the full simulations.

### Simulations
The simulations modules can be found within the src/acrophily_sims directory. The data_prep.py module contains the TwitterDataProcessor class that loads and processes the data used to run the simulation. The sims.py module contains the three classes (AcrophilySim, MeanAbsDiffSim, ProbDiffSim) that run the simulations. The cli.py module contains the command-line interface as well as the main function to run the specified simulation for a given political affiliation/subset of users, which is run in the __main__.py script. 

### Process Data

This directory contains the process_data.py script as well as the convert_to_long_format.Rmd script that processes data generated by the simulations. The former script merges and aggregates simulations run on fractions of the dataset at a time, while the convert_to_long_format R Markdown script generates datasets that can be easily analyzed and visualized using R libraries such as ggplot2. 

### Analysis

Scripts containing visualization or evaluation of the datasets can be found here.

### Figures

Figures saved from visualization scripts should be placed here.

### Tests

Unit tests for the simulation code are found here.
